<p-dataView
  id="workspace_detail_roles_dataview"
  [value]="roles"
  [paginator]="true"
  [alwaysShowPaginator]="true"
  [rowsPerPageOptions]="[24, 48]"
  [rows]="24"
  [layout]="'grid'"
  [filterBy]="filterBy"
  [sortField]="sortField"
  [sortOrder]="sortOrder"
>
  <ng-template pTemplate="header">
    <div class="flex flex-wrap align-items-center mx-1">
      <div class="flex flex-wrap align-items-center ml-1 gap-2">
        <div
          class="p-selectbutton-title data-view-control opacity-90 text-sm w-3rem text-right"
          [title]="'DIALOG.ROLE.QUICK_FILTER.TOOLTIP' | translate"
        >
          {{ 'DIALOG.ROLE.QUICK_FILTER.LABEL' | translate }}
        </div>
        <div class="slim-selectbutton filter-selectbutton">
          <p-selectButton
            inputid="app_search_quick_filter"
            styleClass="data-view-control opacity-90a"
            [options]="quickFilterItems"
            [(ngModel)]="quickFilterValue"
            (onChange)="onQuickFilterChange($event)"
          >
            <ng-template let-item>{{ item.label | translate }}</ng-template>
          </p-selectButton>
        </div>
      </div>
      <ocx-data-view-controls
        class="flex-grow-1"
        [supportedViews]="['grid']"
        [initialViewMode]="'grid'"
        [filterValue]="filterValue"
        [enableFiltering]="true"
        (filterChange)="onFilterChange($event)"
        [filterColumns]="['ROLE.NAME' | translate, 'ROLE.TYPE' | translate]"
        [enableSorting]="true"
        [sortingOptions]="[
          { label: 'ROLE.NAME' | translate, value: 'name' },
          { label: 'ROLE.TYPE' | translate, value: 'type' }
        ]"
        [defaultSortOption]="sortField"
        [defaultSortDirection]="sortOrder === 1"
        (sortChange)="onSortChange($event)"
        (sortDirectionChange)="onSortDirChange($event)"
        [translations]="dataViewControlsTranslations"
      >
      </ocx-data-view-controls>
      <div class="ml-3 flex column-gap-2">
        <p-button
          *ocxIfPermission="'WORKSPACE_ROLES#VIEW'"
          type="button"
          id="workspace_roles_header_reload"
          styleClass="h-full"
          [title]="'ACTIONS.SEARCH.RELOAD' | translate"
          (onClick)="onReload()"
          icon="pi pi-refresh"
        >
        </p-button>
        <p-button
          *ocxIfPermission="'WORKSPACE_ROLES#SAVE'"
          type="button"
          id="workspace_roles_header_save"
          styleClass="h-full"
          [title]="'ACTIONS.TOOLTIPS.SAVE' | translate"
          (onClick)="onSave()"
          icon="pi pi-save"
        >
        </p-button>
      </div>
    </div>
  </ng-template>
  <ng-template let-role let-item="rowIndex" pTemplate="gridItem">
    <div class="col-12 sm:col-6 md:col-4 lg:col-4 xl:col-3 p-3">
      <div
        [id]="'workspace_detail_roles_data_item_' + item"
        class="card relative p-2 cursor-pointer"
        [class.bg-primary]="role.isWorkspaceRole"
        [class.hover:bg-gray-200]="role.isIamRole && !role.isWorkspaceRole"
        [class.hover:text-color]="role.isIamRole && !role.isWorkspaceRole"
        (click)="onToggleRole(role)"
      >
        <span
          *ngIf="role.isWorkspaceRole"
          [id]="'workspace_detail_roles_data_item_' + item + '_iam'"
          [title]="'PRODUCT.ACTIONS.DEREGISTER.TOOLTIP' | translate"
          class="card-badge-left card-badge-left-text badge-2-text"
          [class.line-through]="role.deleted"
          [class.danger-action-text]="role.deleted"
          [class.text-md]="role.deleted"
          >W</span
        >
        <span
          *ngIf="role.isIamRole"
          [id]="'workspace_detail_roles_data_item_' + item + '_iam'"
          [title]="'PRODUCT.ACTIONS.DEREGISTER.TOOLTIP' | translate"
          class="card-badge-left card-badge-left-text badge-1"
          >IAM</span
        >
        <div class="h-2rem flex flex-column justify-content-center text-center">
          <div class="font-bold" [title]="'Name: ' + role.name">{{ limitText(role.name, 30) }}</div>
        </div>
      </div>
    </div>
  </ng-template>
</p-dataView>

<!--
<p-dialog
  header="{{ 'ROLE.ROLES_ADD_ROLE' | translate }}"
  [(visible)]="addDisplay"
  [modal]="true"
  contentStyleClass="pt-1"
>
  <span class="p-float-label">
    <input
      pInputText
      type="text"
      class="min-w-full"
      id="workspace_role_mgmt_role_name_input"
      maxlength="100"
      [(ngModel)]="newWorkspaceRole"
    />
    <label for="workspace_role_mgmt_role_name_input">{{ 'ROLE.ROLE_NAME' | translate }}</label>
  </span>
  <div class="flex flex-wrap justify-content-end gap-2 pt-3 mt-2">
    <button pButton icon="pi pi-times" (click)="toggleAddDialog()" [label]="'ACTIONS.CANCEL' | translate"></button>
    <button pButton icon="pi pi-save" (click)="addPortalRole()" [label]="'ACTIONS.SAVE' | translate"></button>
  </div>
</p-dialog>
-->
